<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Quantum Sound Experience Generator</title>
    <script src="https://cdn.jsdelivr.net/npm/tone@14.8.49/build/Tone.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            flex-direction: column;
            background-color: #f0f0f0;
            font-family: Arial, sans-serif;
        }
        button {
            padding: 10px 20px;
            margin: 5px;
            font-size: 16px;
            cursor: pointer;
        }
        #buttons-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }
    </style>
</head>
<body>

    <h1>Quantum Sound Experience Generator</h1>
    <div id="buttons-container">
        <button onclick="playLifeStageSound('child')">Child</button>
        <button onclick="playLifeStageSound('lover')">Lover</button>
        <button onclick="playLifeStageSound('partner')">Partner</button>
        <button onclick="playLifeStageSound('philosopher')">Philosopher</button>
        <button onclick="playLifeStageSound('adult')">Adult</button>
        <button onclick="playLifeStageSound('wanderer')">Wanderer</button>
        <button onclick="playLifeStageSound('artist')">Artist</button>
    </div>

   <script>
    // Ensure the audio context is started when interaction begins
    async function startAudio() {
        await Tone.start();
        console.log('Audio is ready');
    }

    // Bind the event to start audio context
    document.documentElement.addEventListener('mousedown', startAudio);
    document.documentElement.addEventListener('touchend', startAudio); // For touch devices

    // Function to play arpeggiated scales
    function playArpeggio(scale, octaves, style) {
        const synth = new Tone.PolySynth(Tone.Synth, {
            envelope: {
                attack: 0.1,
                decay: 0.2,
                sustain: 0.3,
                release: 0.8
            }
        }).toDestination();

        // Styles determine the speed of the arpeggio
        const noteDuration = style === 'fast' ? '16n' : '4n';

        // Create an array with notes for octave spreading
        let fullScale = [];
        for (let o = 0; o < octaves; o++) {
            for (let i = 0; i < scale.length; i++) {
                fullScale.push(scale[i] + (4 + o)); // Starting at the fourth octave
            }
        }

        // Play the arpeggio with timing based on the style
        let time = 0;
        fullScale.forEach(note => {
            synth.triggerAttackRelease(note, noteDuration, Tone.now() + time);
            time += Tone.Time(noteDuration).toSeconds() * (style === 'fast' ? 0.5 : 1);
        });
    }

    // Define life stage sounds with corresponding musical elements
    const lifeStageSounds = {
        'child': {
            scale: ['C', 'E', 'G'],
            octaves: 2,
            style: 'fast'
        },
        'lover': {
            scale: ['C', 'Eb', 'G'],
            octaves: 2,
            style: 'slow'
        },
        'partner': {
            scale: ['D', 'F#', 'A'],
            octaves: 2,
            style: 'medium'
        },
        'philosopher': {
            scale: ['D', 'F', 'A'],
            octaves: 2,
            style: 'slow'
        },
        'adult': {
            scale: ['E', 'G#', 'B'],
            octaves: 2,
            style: 'medium'
        },
        'wanderer': {
            scale: ['E', 'G', 'B'],
            octaves: 2,
            style: 'fast'
        },
        'artist': {
            scale: ['A', 'C', 'E'],
            octaves: 2,
            style: 'slow'
        }
    };

    // Event listener for button clicks that triggers playing of sounds
    document.querySelectorAll('button').forEach(btn => {
        btn.addEventListener('click', function() {
            const lifeStage = this.id;
            const { scale, octaves, style } = lifeStageSounds[lifeStage];
            playArpeggio(scale, octaves, style);
        });
    });
</script>

</body>
</html>
